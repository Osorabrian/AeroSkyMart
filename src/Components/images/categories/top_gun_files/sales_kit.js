(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerpolicy&&(n.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?n.credentials="include":o.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(o){if(o.ep)return;o.ep=!0;const n=t(o);fetch(o.href,n)}})();class E{constructor(e,t="flipdown",i={}){if(typeof e!="number")throw new Error(`FlipDown: Constructor expected unix timestamp, got ${typeof e} instead.`);typeof t=="object"&&(i=t,t="flipdown"),this.version="0.3.2",this.initialised=!1,this.now=this._getTime(),this.epoch=e,this.countdownEnded=!1,this.hasEndedCallback=null,this.element=document.getElementById(t),this.rotors=[],this.rotorLeafFront=[],this.rotorLeafRear=[],this.rotorTops=[],this.rotorBottoms=[],this.countdown=null,this.daysRemaining=0,this.clockValues={},this.clockStrings={},this.clockValuesAsString=[],this.prevClockValuesAsString=[],this.opts=this._parseOptions(i),this._setOptions()}start(){return this.initialised||this._init(),this.countdown=setInterval(this._tick.bind(this),1e3),this}ifEnded(e){return this.hasEndedCallback=function(){e(),this.hasEndedCallback=null},this}_getTime(){return new Date().getTime()/1e3}_hasCountdownEnded(){return this.epoch-this.now<0?(this.countdownEnded=!0,this.hasEndedCallback!=null&&(this.hasEndedCallback(),this.hasEndedCallback=null),!0):(this.countdownEnded=!1,!1)}_parseOptions(e){let t=["Days","Hours","Minutes","Seconds"];return e.headings&&e.headings.length===4&&(t=e.headings),{theme:e.hasOwnProperty("theme")?e.theme:"dark",headings:t}}_setOptions(){this.element.classList.add(`flipdown__theme-${this.opts.theme}`)}_init(){this.initialised=!0,this._hasCountdownEnded()?this.daysremaining=0:this.daysremaining=Math.floor((this.epoch-this.now)/86400).toString().length;for(var e=this.daysremaining<=2?2:this.daysremaining,t=0;t<e+6;t++)this.rotors.push(this._createRotor(0));for(var i=[],t=0;t<e;t++)i.push(this.rotors[t]);this.element.appendChild(this._createRotorGroup(i,0));for(var o=e,t=0;t<3;t++){for(var n=[],l=0;l<2;l++)n.push(this.rotors[o]),o++;this.element.appendChild(this._createRotorGroup(n,t+1))}return this.rotorLeafFront=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-front")),this.rotorLeafRear=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-leaf-rear")),this.rotorTop=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-top")),this.rotorBottom=Array.prototype.slice.call(this.element.getElementsByClassName("rotor-bottom")),this._tick(),this._updateClockValues(!0),this}_createRotorGroup(e,t){var i=document.createElement("div");i.className="rotor-group";var o=document.createElement("div");return o.className="rotor-group-heading",o.setAttribute("data-before",this.opts.headings[t]),i.appendChild(o),h(i,e),i}_createRotor(e=0){var t=document.createElement("div"),i=document.createElement("div"),o=document.createElement("figure"),n=document.createElement("figure"),l=document.createElement("div"),a=document.createElement("div");return t.className="rotor",i.className="rotor-leaf",o.className="rotor-leaf-rear",n.className="rotor-leaf-front",l.className="rotor-top",a.className="rotor-bottom",o.textContent=e,l.textContent=e,a.textContent=e,h(t,[i,l,a]),h(i,[o,n]),t}_tick(){this.now=this._getTime();var e=this.epoch-this.now<=0?0:this.epoch-this.now;this.clockValues.d=Math.floor(e/86400),e-=this.clockValues.d*86400,this.clockValues.h=Math.floor(e/3600),e-=this.clockValues.h*3600,this.clockValues.m=Math.floor(e/60),e-=this.clockValues.m*60,this.clockValues.s=Math.floor(e),this._updateClockValues(),this._hasCountdownEnded()}_updateClockValues(e=!1){this.clockStrings.d=c(this.clockValues.d,2),this.clockStrings.h=c(this.clockValues.h,2),this.clockStrings.m=c(this.clockValues.m,2),this.clockStrings.s=c(this.clockValues.s,2),this.clockValuesAsString=(this.clockStrings.d+this.clockStrings.h+this.clockStrings.m+this.clockStrings.s).split(""),this.rotorLeafFront.forEach((o,n)=>{o.textContent=this.prevClockValuesAsString[n]}),this.rotorBottom.forEach((o,n)=>{o.textContent=this.prevClockValuesAsString[n]});function t(){this.rotorTop.forEach((o,n)=>{o.textContent!=this.clockValuesAsString[n]&&(o.textContent=this.clockValuesAsString[n])})}function i(){this.rotorLeafRear.forEach((o,n)=>{if(o.textContent!=this.clockValuesAsString[n]){o.textContent=this.clockValuesAsString[n],o.parentElement.classList.add("flipped");var l=setInterval(function(){o.parentElement.classList.remove("flipped"),clearInterval(l)}.bind(this),500)}})}e?(t.call(this),i.call(this)):(setTimeout(t.bind(this),500),setTimeout(i.bind(this),500)),this.prevClockValuesAsString=this.clockValuesAsString}}function c(r,e){return r=r.toString(),r.length<e?c("0"+r,e):r}function h(r,e){e.forEach(t=>{r.appendChild(t)})}let y="/";window.Shopify&&window.Shopify.routes&&window.Shopify.routes.root&&(y=window.Shopify.routes.root);globalThis.cl=(...r)=>{console.log.apply(console,r)};let s=globalThis.salesKitAO,f=null;function T(){var r;if(!globalThis.document.body){cl("salesKit error, no window.document.body");return}if(!s||!s.shop){cl("salesKit not setup");return}s.product??(s.product={}),(r=s.product).metaOffers??(r.metaOffers=[]),s.shopOffersSettings??(s.shopOffersSettings={}),s.shopSalesSettings??(s.shopSalesSettings={}),f=document.querySelector("#sk-announce"),f||(window.document.body.insertAdjacentHTML("afterbegin",'<div id="sk-announce" style=""></div>'),f=document.querySelector("#sk-announce")),b()}async function _(){return await(await fetch(`${y}cart.js`,{method:"GET",headers:{"Content-Type":"application/json"}})).json()}async function b(){M();let r=await _();if(s.shopOffersSettings.styling){let t=document.createElement("style");t.innerHTML=s.shopOffersSettings.styling,document.body.appendChild(t)}let e=O();K(e),G(r,e)}function m(r){return r?(s.languageId??(s.languageId="en"),r[s.languageId]?r[s.languageId]:r.en?r.en:""):""}function k(r,e={}){let t=null;for(let i of r)if(t=document.querySelector(i),t)return t;return cl(`SK SKThemeGetFirstElQuery not found ${r[0]}`),null}function V(){let r=document.querySelector(".sk-before-cart-container");if(r)return r;if(r=k(["form.cart",".cart__items",".shopify-cart-form","#cart_form",".cart__wrapper",".cart-summary-overlay",".widget_shopping_cart_content"]),!r){cl("SK SKGetThemeBeforeCartContainer not found");return}r.insertAdjacentHTML("afterbegin",'<div class="sk-before-cart-container"></div>');let e=document.querySelector(".sk-before-cart-container");return e||cl("SKThemeGetBeforeCartContainer no .sk-before-cart-container node"),e}function C(){return k([".price.price--large",".product__price",".price__container",".add_to_cart_button",".product-page-info__button-add-to-cart"])}function A(){let r=document.querySelector(".sk-sale-timer-container");if(r)return r;let e=null;return e=C(),e?(e.insertAdjacentHTML("afterend",'<div class="sk-sale-timer-container"></div>'),r=document.querySelector(".sk-sale-timer-container"),r||cl("sale timer no .sk-sale-timer-container node"),r):(cl('sale timer dont know where to show. Please add this code to theme product template: <div id="sk-sale-timer" style=""></div>'),null)}function L(){let r=document.querySelector(".sk-product-volume-container");if(r)return r;let e=null;return e=C(),e?(e.insertAdjacentHTML("afterend",'<div class="sk-product-volume-container"></div>'),r=document.querySelector(".sk-product-volume-container"),r||cl("sale timer no .sk-product-volume-container node"),r):(cl('sk-product-volume-container dont know where to show. Please add this code to theme product template: <div id="sk-product-volume-container" style=""></div>'),null)}function O(){if(!s.shopOffers)return[];let r=new Date().toISOString(),e=[];for(let t of s.shopOffers){if(t.state=="running"){if(t.scheduling.endAtUTC&&t.scheduling.endAtUTC<r)continue;e.push(t)}if(t.state=="paused"){if(!t.scheduling.startAtUTC||t.scheduling.startAtUTC<r||t.scheduling.endAtUTC&&t.scheduling.endAtUTC<r)continue;cl(`SKGetOffersRunning offer ${t.type} ${t.id}`),e.push(t)}}return e}async function M(){var o,n,l;if(!((n=(o=s.product)==null?void 0:o.metaSale)!=null&&n.endAtUTC)||!((l=s.product)!=null&&l.onSale))return;let r=m(s.shopSalesSettings.saleCounterMsg)||"Sale ends in {{timer}}";if(typeof r!="string"){cl("typeof salesKitAO.shopSalesSettings.saleCounterMsg[salesKitAO.languageId] ! string",typeof s.shopSalesSettings.saleCounterMsg[s.languageId]);return}let e=A();if(!e)return;r=r.replace("{{timer}}",'<div id="sk-sale-timer" class="flipdown"></div>'),e.innerHTML=r;let t=Math.floor(new Date(`${s.product.metaSale.endAtUTC}Z`).getTime()/1e3),i=Math.floor(new Date().getTime()/1e3);if(t<i){cl(`sale timer sale endAtUTC in past ts ${t} tsNow ${i}`);return}new E(t,"sk-sale-timer",{theme:"dark"}).start()}async function K(r){var i,o;if(!((o=(i=s.product)==null?void 0:i.metaOffers)!=null&&o.length))return;let e=L();if(!e)return;let t=r.filter(n=>n.type=="volume");for(let n of s.product.metaOffers){let l=t.find(u=>u.id==n.id);if(!l)continue;let a=m(l.ux.productMessage);e.innerHTML=a;return}}async function G(r,e){var l,a,u,p;if(!((a=(l=s.cart)==null?void 0:l.items)!=null&&a.length))return;let t=V();if(!t)return;let i=document.createElement("div");i.classList.add("sk-cart-volume-container"),t.appendChild(i);let o=[],n=e.filter(d=>d.type=="volume");for(let d of s.cart.items)if((p=(u=d.product)==null?void 0:u.metaOffers)!=null&&p.length)for(let w of d.product.metaOffers){let g=n.find(v=>v.id==w.id);if(!g)continue;let S=m(g.ux.productMessage);o.indexOf(S)===-1&&o.push(S)}o.length&&(i.innerHTML=o.join("<br>"))}T();
